<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
  <div id="loadImages" hidden></div>

  <script src="header.js"></script>

  <aside style="float: left;">
    <h1>Filters</h1>
    <h2>Category</h2>
    <div>
      <label>
        <input type="radio" id="coffee" name="input-radio-example" value="2B">
        Coffee
      </label>
      <label>
        <input type="radio" id="cold" name="input-radio-example" value="2B">
        Cold Beverages
      </label>
      <label>
        <input type="radio" id="hot" name="input-radio-example" value="2B">
        Hot Beverages
      </label>
      <label>
        <input type="radio" id="seasonal" name="input-radio-example" value="2B">
        Seasonal
      </label>
      <label>
        <input type="radio" id="teaa" name="input-radio-example" value="2B">
        Tea
      </label>
    </div>

  </aside>

  <div id="beverageContainer" style="display: flex; flex-wrap: wrap;"></div>

  <div id="paginationDivContainer" style="margin-top: 20px;"></div>

  <script type="module">
    import { setPageCategoryQuery, setPageQuery, emptyPaginationDivContainer, loadImages, createButton, createButtonWithEventListener } from './utils/beverages.js';
    import {
      beverages, totalPages, getTotalPages, beveragesByPage, coffeesByPage, hotBeveragesByPage, coldBeveragesByPage, seasonalsByPage, teasByPage
    } from './beveragesData.js';

    document.addEventListener('DOMContentLoaded', function () {
      displayBeveragesByCategory('all');
      loadImages(beverages);
    });

    const beverageContainer = document.getElementById('beverageContainer');

    `<!-- ------------------------------- events -------------------------------- -->`
    {
      const coffeeInput = document.getElementById('coffee');
      coffeeInput.addEventListener('click', () => displayBeveragesByCategory('coffee'));

      const hotInput = document.getElementById('hot');
      hotInput.addEventListener('click', () => displayBeveragesByCategory('hot'));

      const coldInput = document.getElementById('cold');
      coldInput.addEventListener('click', () => displayBeveragesByCategory('cold'));

      const seasonalInput = document.getElementById('seasonal');
      seasonalInput.addEventListener('click', () => displayBeveragesByCategory('seasonal'));

      const teaInput = document.getElementById('teaa');
      teaInput.addEventListener('click', () => displayBeveragesByCategory('tea'));
    }

    `<!-- ------------------------------ displays ------------------------------- -->`
    function displayBeveragesByCategory(category, page = null) {
      emptyPaginationDivContainer();
      beverageContainer.innerHTML = '';

      setPageQuery();
      const currentPage = page || 1;

      let data;
      if (category === 'coffee') {
        data = coffeesByPage(currentPage);
      } else if (category === 'hot') {
        data = hotBeveragesByPage(currentPage);
      } else if (category === 'cold') {
        data = coldBeveragesByPage(currentPage);
      } else if (category === 'seasonal') {
        data = seasonalsByPage(currentPage);
      } else if (category === 'tea') {
        data = teasByPage(currentPage);
      } else if (category === 'all') {
        data = beveragesByPage(currentPage);
      }

      data.partition.map(d => {
        const form = document.createElement('form');

        const addToCartButton = createButton('Add to cart');
        addToCartButton.addEventListener('click', (e) => {
          e.preventDefault();
          console.log(d);
        });

        form.innerHTML = `
          <img height='170' src=${d.image}>
          <h4>${d.title}</h4>
          <p>$${d.price}.00</p>
        `;
        form.appendChild(addToCartButton);
        beverageContainer.appendChild(form);
      });
      const totalPages = (data.length);

      displayPagination(currentPage, totalPages, category);
      setPageCategoryQuery(currentPage, category);
    }
    `

    <!-- ------------------------- pagination buttons -------------------------- -->
    `
    function displayPagination(currentPage, totalPages, category) {
      const paginationDivContainer = document.getElementById('paginationDivContainer');

      if(currentPage > 1) {

        const buttonContent = 'Previous';
        const callback = () => displayBeveragesByCategory(category, currentPage - 1)
        const prevButton = createButtonWithEventListener(buttonContent, callback);
        paginationDivContainer.appendChild(prevButton);
      }

      if (currentPage > 4) {

        const buttonContent = 1;
        const callback = () => displayBeveragesByCategory(category, 1);
        const firstButton = createButtonWithEventListener(buttonContent, callback);
        paginationDivContainer.appendChild(firstButton);
      }


      if (currentPage > 4) {

        const btn = createButton('...');
        paginationDivContainer.appendChild(btn);

      } else if (currentPage > 3) {

        const buttonContent = currentPage - 3;
        const callback = () => displayBeveragesByCategory(category, currentPage - 3);
        const cpm3Button = createButtonWithEventListener(buttonContent, callback);
        paginationDivContainer.appendChild(cpm3Button);
      }

      if( (currentPage - 2) > 0 ) {

        const buttonContent = currentPage - 2;
        const callback = () => displayBeveragesByCategory(category, currentPage - 2);
        const cpm2Button = createButtonWithEventListener(buttonContent, callback);
        paginationDivContainer.appendChild(cpm2Button);
      }

      
      if( (currentPage - 1) > 0 ) {

        const buttonContent = currentPage - 1;
        const callback = () => displayBeveragesByCategory(category, currentPage - 1);
        const cpm1Button = createButtonWithEventListener(buttonContent, callback);
        paginationDivContainer.appendChild(cpm1Button);
      }

      `
      <!-- ---------------------------- current page ----------------------------- -->
      `
      const buttonContent = currentPage;
      const callback = () => displayBeveragesByCategory(category, currentPage);
      const cpButton = createButtonWithEventListener(buttonContent, callback);
      paginationDivContainer.appendChild(cpButton);
      `
      <!-- ---------------------------- current page ----------------------------- -->
      `

      

      if ( (currentPage + 1) <= totalPages ) {

        const buttonContent = currentPage + 1;
        const callback = () => displayBeveragesByCategory(category, currentPage + 1);
        const cp1Button = createButtonWithEventListener(buttonContent, callback);
        paginationDivContainer.appendChild(cp1Button);
      }



      if ( (currentPage + 2) <= totalPages ) {

        const buttonContent = currentPage + 2;
        const callback = () => displayBeveragesByCategory(category, currentPage + 2);
        const cp2Button = createButtonWithEventListener(buttonContent, callback);
        paginationDivContainer.appendChild(cp2Button);
      }

      if ((currentPage + 4) <= totalPages) {
        const btn = createButton('...');
        paginationDivContainer.appendChild(btn);
      } else if ((currentPage + 3) <= totalPages) {

        const buttonContent = currentPage + 3;
        const callback = () => displayBeveragesByCategory(category, currentPage + 3);
        const cp3Button = createButtonWithEventListener(buttonContent, callback);
        paginationDivContainer.appendChild(cp3Button);
      }

      

      if( (currentPage + 4) <= totalPages ) {

        const buttonContent = totalPages;
        const callback = () => displayBeveragesByCategory(category, totalPages);
        const lastButton = createButtonWithEventListener(buttonContent, callback);
        paginationDivContainer.appendChild(lastButton);
      }

      

      if( currentPage < totalPages ) {
        
        const buttonContent = 'Next';
        const callback = () => displayBeveragesByCategory(category, currentPage + 1);
        const nextButton = createButtonWithEventListener(buttonContent, callback);
        paginationDivContainer.appendChild(nextButton);
      }

    }

  </script>

</body>

</html>